<!-- pages/video-detail/video-detail.wxml -->
<view class="container">
  <!-- è¿”å›æŒ‰é’® -->
  <view class="back-button" bindtap="handleBack">
    <text class="back-icon">â†</text>
  </view>

  <!-- ç½‘ç»œæç¤º -->
  <view wx:if="{{showNetworkTip}}" class="network-tip">
    å½“å‰ä½¿ç”¨{{networkType}}ç½‘ç»œï¼Œç»§ç»­æ’­æ”¾å¯èƒ½æ¶ˆè€—æµé‡
  </view>

  <!-- è§†é¢‘æ’­æ”¾å™¨åŒºåŸŸ -->
  <view class="video-wrapper">
    <block wx:if="{{!isLoading}}">
      <video
        id="videoPlayer"
        class="video-player"
        src="{{video.videoUrl}}"
        poster="{{video.thumbnail}}"
        controls
        show-center-play-btn
        enable-play-gesture
        object-fit="contain"
        bindready="handleVideoReady"
        bindplay="handleVideoPlay"
        bindpause="handleVideoPause"
        bindended="handleVideoEnded"
        binderror="handleVideoError"
        bindtimeupdate="handleTimeUpdate"
        bindfullscreenchange="handleFullScreenChange"
      />
    </block>
    
    <block wx:else>
      <view class="loading-container">
        <text class="loading-text">åŠ è½½ä¸­...</text>
      </view>
    </block>
  </view>

  <!-- è§†é¢‘ä¿¡æ¯å¡ç‰‡ -->
  <view class="video-info">
    <text class="video-title">{{video.title}}</text>
    
    <view class="video-meta">
      <view class="category">{{video.category}}</view>
      <text class="duration">â± {{video.duration}}</text>
      <text class="views">ğŸ‘ {{video.views}} æ¬¡è§‚çœ‹</text>
    </view>

    <text class="video-description" wx:if="{{video.description}}">
      {{video.description}}
    </text>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button 
        class="btn-favorite {{isFavorited ? 'favorited' : ''}}" 
        bindtap="handleFavorite"
      >
        {{isFavorited ? 'â˜… å·²æ”¶è—' : 'â˜† æ”¶è—'}}
      </button>
      
      <button class="btn-share" bindtap="handleShare">
        â‡§ åˆ†äº«
      </button>
    </view>
  </view>

  <!-- ç›¸å…³æ¨èè§†é¢‘ -->
  <view class="related-videos" wx:if="{{relatedVideos.length > 0}}">
    <view class="related-title">ç›¸å…³æ¨è</view>
    
    <view class="related-list">
      <view 
        wx:for="{{relatedVideos}}" 
        wx:key="id" 
        class="related-video-item"
        bindtap="navigateToVideo"
        data-id="{{item.id}}"
      >
        <view class="related-thumbnail">
          <image src="{{item.thumbnail}}" mode="aspectFill"/>
          <view class="play-icon"></view>
        </view>
        
        <view class="related-info">
          <text class="related-video-title">{{item.title}}</text>
          <view class="related-meta">
            <text class="related-duration">{{item.duration}}</text>
            <text class="related-views">{{item.views}} è§‚çœ‹</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{relatedVideos.length === 0 && !isLoading}}">
    <text class="empty-icon">ğŸ“¹</text>
    <text class="empty-text">æš‚æ— ç›¸å…³æ¨è</text>
  </view>
</view>
