<!--pages/news-center/news-center.wxml-->
<view class="news-center-container">
  <!-- é¡¶éƒ¨å›ºå®šå¯¼èˆª -->
  <view class="header">
    <view class="header-content">
      <text class="page-title">èµ„è®¯ä¸­å¿ƒ</text>
      <view class="search-box" bindtap="handleShowSearch">
        <text class="search-icon">ğŸ”</text>
        <text class="search-placeholder">æœç´¢å¥åº·èµ„è®¯å’Œè§†é¢‘</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢é¢æ¿ -->
  <view class="search-panel {{showSearch ? 'active' : ''}}">
    <view class="search-input-box">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input" 
        placeholder="è¾“å…¥å…³é”®è¯æœç´¢..." 
        value="{{searchKeyword}}"
        bindinput="handleSearchInput"
        confirm-type="search"
        bindconfirm="handleSearch"
      />
      <text class="cancel-btn" bindtap="handleCancelSearch">å–æ¶ˆ</text>
    </view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content-area">
    <!-- åå¥½å¼•å¯¼æç¤º -->
    <view wx:if="{{showPreferenceGuide}}" class="preference-guide">
      <view class="guide-icon">æç¤º</view>
      <view class="guide-content">
        <text class="guide-title">ä¸ªæ€§åŒ–æ¨è</text>
        <text class="guide-desc">è®¾ç½®æ‚¨çš„è®¢é˜…åå¥½ï¼Œè·å–æ›´ç²¾å‡†çš„å†…å®¹æ¨è</text>
      </view>
      <view class="guide-action" bindtap="goToPreferenceSettings">
        <text>å»è®¾ç½®</text>
      </view>
    </view>

    <!-- å†…å®¹æ¨¡å¼åˆ‡æ¢Tab -->
    <view class="content-mode-tabs">
      <view 
        class="mode-tab {{contentMode === 'recommended' ? 'active' : ''}}"
        bindtap="switchContentMode"
        data-mode="recommended"
      >
        <text>ä¸ºä½ æ¨è</text>
        <view wx:if="{{contentMode === 'recommended'}}" class="mode-indicator"></view>
      </view>
      <view 
        class="mode-tab {{contentMode === 'all' ? 'active' : ''}}"
        bindtap="switchContentMode"
        data-mode="all"
      >
        <text>å…¨éƒ¨å†…å®¹</text>
        <view wx:if="{{contentMode === 'all'}}" class="mode-indicator"></view>
      </view>
    </view>

    <!-- Tabåˆ‡æ¢ -->
    <view class="tabs">
      <view 
        class="tab-item {{activeTab === 'all' ? 'active' : ''}}" 
        bindtap="handleTabChange" 
        data-tab="all"
      >
        å…¨éƒ¨
      </view>
      <view 
        class="tab-item {{activeTab === 'video' ? 'active' : ''}}" 
        bindtap="handleTabChange" 
        data-tab="video"
      >
        è§†é¢‘
      </view>
      <view 
        class="tab-item {{activeTab === 'article' ? 'active' : ''}}" 
        bindtap="handleTabChange" 
        data-tab="article"
      >
        æ–‡ç« 
      </view>
    </view>

    <!-- ç€‘å¸ƒæµå¸ƒå±€ -->
    <view class="waterfall-container">
      <view class="waterfall-column">
        <view 
          wx:for="{{leftColumn}}" 
          wx:key="id" 
          class="waterfall-item"
          bindtap="handleItemTap"
          data-item="{{item}}"
        >
          <!-- å›¾ç‰‡/è§†é¢‘å°é¢ -->
          <view class="item-cover">
            <image 
              class="cover-image" 
              src="{{item.coverImage || item.thumbnail}}" 
              mode="widthFix"
              lazy-load
            />
            <view wx:if="{{item.type === 'video'}}" class="video-badge">
              <text class="badge-icon">â–¶</text>
              <text class="badge-text">{{item.duration}}</text>
            </view>
          </view>

          <!-- å†…å®¹ä¿¡æ¯ -->
          <view class="item-content">
            <view class="item-category">{{item.category}}</view>
            <text class="item-title">{{item.title}}</text>
            <!-- æ ‡ç­¾ -->
            <view wx:if="{{item.tags && item.tags.length > 0}}" class="content-tags">
              <text wx:for="{{item.tags}}" wx:key="index" wx:for-item="tag" class="content-tag">{{tag}}</text>
            </view>
            <view class="item-meta">
              <text class="meta-text">{{item.views || item.date}}</text>
            </view>
          </view>
        </view>
      </view>

      <view class="waterfall-column">
        <view 
          wx:for="{{rightColumn}}" 
          wx:key="id" 
          class="waterfall-item"
          bindtap="handleItemTap"
          data-item="{{item}}"
        >
          <!-- å›¾ç‰‡/è§†é¢‘å°é¢ -->
          <view class="item-cover">
            <image 
              class="cover-image" 
              src="{{item.coverImage || item.thumbnail}}" 
              mode="widthFix"
              lazy-load
            />
            <view wx:if="{{item.type === 'video'}}" class="video-badge">
              <text class="badge-icon">â–¶</text>
              <text class="badge-text">{{item.duration}}</text>
            </view>
          </view>

          <!-- å†…å®¹ä¿¡æ¯ -->
          <view class="item-content">
            <view class="item-category">{{item.category}}</view>
            <text class="item-title">{{item.title}}</text>
            <!-- æ ‡ç­¾ -->
            <view wx:if="{{item.tags && item.tags.length > 0}}" class="content-tags">
              <text wx:for="{{item.tags}}" wx:key="index" wx:for-item="tag" class="content-tag">{{tag}}</text>
            </view>
            <view class="item-meta">
              <text class="meta-text">{{item.views || item.date}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{leftColumn.length === 0 && rightColumn.length === 0 && !loading}}" class="empty-state">
      <text class="empty-icon">ğŸ“­</text>
      <text class="empty-text">æš‚æ— å†…å®¹</text>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
  </view>
</view>
